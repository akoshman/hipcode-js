### Scope

```js
(function() {
   var a = b = 5;
})();

console.log(b);
```

Что выведется в консоль?

Пояснение: нюанс в том, что с помощью ключевого слова **var** переменная **a** объявлена как локальная, в то время как переменная **b** относится к глобальной области видимости. В консоль выведется **5**.

Ещё один нюанс заключается в том, что данный код работает потому, что в функции не используется *strict mode*. В случае его использования, будет ошибка доступа к переменной (*ReferenceError: assignment to undeclared variable b*). При использовании *strict mode* нужно явно указывать ссылку на глобальный объект:

```js
(function() {
   'use strict';
   var a = window.b = 5;
})();

console.log(b);
```

### Hoisting

```js
function test() {
   console.log(a);
   console.log(foo());
   
   var a = 1;
   function foo() {
      return 2;
   }
}

test();
```

Каков результат выполнения данного кода?

Пояснение: объявления переменной **a** и функции **foo** "всплывают" вверх тела функции **test**, но на момент вывода перменной **a** она будет неинициализирована. В консоль выведется **undefined** и **2**.

Иными словами, данный код эквивалентен следующему:

```js
function test() {
   var a;
   function foo() {
      return 2;
   }

   console.log(a);
   console.log(foo());
   
   a = 1;
}

test();
```

### Как работает this

Каков результат выполнения следующего кода?

```js
var fullname = 'John Doe';
var obj = {
   fullname: 'Colin Ihrig',
   prop: {
      fullname: 'Aurelio De Rosa',
      getFullname: function() {
         return this.fullname;
      }
   }
};

console.log(obj.prop.getFullname());

var test = obj.prop.getFullname;

console.log(test());
```

Пояснение: значение контекста функции, обозначаемого с помощью **this**, зависит от способа вызова функции, а не её объявления. В первом случае функция **getFullname** вызывается как метод объекта **obj.prop**, поэтому она вернёт значение свойства **fullname** этого объекта. Во втором случае, когда функция **getFullname** присваивается переменной **test**, контекст **this** указывает на глобальный объект (**window**). Это происходит потому, что **test** является свойством **window** и вызывается в его контексте. Следовательно, вернётся значение свойства **fullname** глобального объекта. В консоль выведется **Aurelio De Rosa** и **John Doe**.
